{% extends 'layout/layout.html' %}
{% load static %}

{% block body %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<div class="container py-4">
    <h4 class="mb-3 fnSuperiorRegularTitle2 text-secondary">Editar Linea</h4>

    <form method="post">
        {% csrf_token %}

        <div class="mb-4 ">
            <div class="fnSuperiorRegularTitle text-quinto ">Datos de la linea</div>
            <div class=" row border border-3 border-quinto rounded rounded-4">

                <div class="col-md-4 my-3">
                    <label class="form-label fnSuperiorRegularTitle3 m-0 text-primary">Socio</label>
                    {{ form.expediente }}
                    {% if form.expediente.errors %}
                        <div class="text-danger small">{{ form.expediente.errors }}</div>
                    {% endif %}
                </div>

                <div class="col-md-4 my-3">
                    <label class="form-label fnSuperiorRegularTitle3 m-0 text-primary">Numero</label>
                    {{ form.numero }}
                    {% if form.numero.errors %}
                        <div class="text-danger small">{{ form.numero.errors }}</div>
                    {% endif %}
                </div>
                
                <div class="col-md-4 my-3">
                    <label class="form-label fnSuperiorRegularTitle3 m-0 text-primary"> Tipo</label>
                    {{ form.tipoLinea }}
                    {% if form.tipoLinea.errors %}
                        <div class="text-danger small">{{ form.tipoLinea.errors }}</div>
                    {% endif %}
                </div>

                <div class="col-md-4 my-3">
                    <label class="form-label fnSuperiorRegularTitle3 m-0 text-primary">Monto</label>
                    {{ form.monto }}
                    {% if form.monto.errors %}
                        <div class="text-danger small">{{ form.monto.errors }}</div>
                    {% endif %}
                </div>
                     <div class="col-md-4 my-auto">
        <label class="form-label fnSuperiorRegularTitle3 m-0 text-primary">Vigente</label>

                               <div class="form-check form-switch ms-5 ">
                    {{ form.vigente }}
                    {% if form.vigente.errors %}<div class="text-danger small">{{
                        form.vigente.errors }}</div>{% endif %}
            </div>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-end">
            <button type="submit" class="btn btn-primary">Actualizar Linea</button>
        </div>
    </form>
</div>

{% if messages %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        {% for message in messages %}
            Swal.fire({
                icon: '{% if message.tags == "error" %}error{% else %}success{% endif %}',
                title: '{% if message.tags == "error" %}Atención{% else %}¡Hecho!{% endif %}',
                text: '{{ message|escapejs }}',
                confirmButtonColor: '#3085d6',
                allowOutsideClick: false
            }).then((result) => {
                // Si la vista mandó 'exito' como True y el usuario dio OK
                {% if exito %}
                if (result.isConfirmed) {
                    window.location.href = "{% url 'Index:lineasLayout' %}";
                }
                {% endif %}
            });
        {% endfor %}
    });
</script>
{% endif %}

{% endblock %}